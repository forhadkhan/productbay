# Development Guide

This document contains detailed information about the project structure, development workflows, and architectural decisions used in ProductBay.

## ðŸ“‚ Project Structure

The project follows a strict separation of concerns, ensuring maintainability and scalability.

```text
productbay/
â”œâ”€â”€ app/                        # PHP Application Logic (The "Brain")
â”‚   â”œâ”€â”€ Admin/                  # Admin-specific logic (Menu registration, Asset enqueuing)
â”‚   â”œâ”€â”€ Api/                    # REST API Controllers (Handle React frontend requests)
â”‚   â”œâ”€â”€ Core/                   # Core infrastructure (Plugin init, DI Container, Router)
â”‚   â”œâ”€â”€ Data/                   # Data Access Layer (Repositories, Models)
â”‚   â”œâ”€â”€ Frontend/               # Public-facing logic (Shortcodes, AJAX handlers)
â”‚   â”œâ”€â”€ Http/                   # Request/Response helpers
â”‚   â””â”€â”€ Utils/                  # Helper classes and sanitization tools
â”œâ”€â”€ assets/                     # Compiled Public Assets (Generated by build process)
â”‚   â”œâ”€â”€ css/                    # Compiled Tailwind CSS
â”‚   â”œâ”€â”€ js/                     # Compiled React & Frontend JS bundles
â”œâ”€â”€ src/                        # Source Code (The "Face")
â”‚   â”œâ”€â”€ components/             # Reusable React Components
â”‚   â”‚   â”œâ”€â”€ ui/                 # Reusable UI Primitives (Buttons, Modals, Inputs)
â”‚   â”œâ”€â”€ layouts/                # Admin Layouts (Sidebar, Header wrappers)
â”‚   â”œâ”€â”€ pages/                  # Main Admin Views (Dashboard, Table Editor, Settings)
â”‚   â”œâ”€â”€ store/                  # React Context & State Management
â”‚   â”œâ”€â”€ styles/                 # Raw CSS & Tailwind Directives
â”‚   â”œâ”€â”€ types/                  # TypeScript Interfaces & Types
â”‚   â”œâ”€â”€ utils/                  # JS Helper functions & API Clients
â”‚   â”œâ”€â”€ App.tsx                 # Main React App Entry
â”‚   â””â”€â”€ index.tsx               # Entry point mounting the React App to DOM
â”œâ”€â”€ languages/                  # Translation Files (.pot, .po, .mo)
â”œâ”€â”€ node_modules/               # NPM Dependencies (Git ignored)
â”œâ”€â”€ package.json                # JS Dependencies & Scripts
â”œâ”€â”€ productbay.php              # Main Plugin File (Bootstrapper)
â”œâ”€â”€ tsconfig.json               # TypeScript Configuration
â””â”€â”€ webpack.config.js           # Webpack Build Configuration
```

## ðŸŽ¨ Tailwind CSS Architecture & Best Practices

We use **Tailwind CSS v4** for styling the React-based admin interface. Since WordPress plugins exist in a shared environment (the WP Admin dashboard), we must take extra precautions to prevent our styles from conflicting with other plugins or the WordPress core UI.

### 1. Scoped Styling (Isolation)

To adhere to WordPress.org best practices regarding CSS conflicts, we do **not** rely on prefixing every single utility class (which is cumbersome). Instead, we use a robust **scoping strategy**:

-   **The Mechanism**: In `tailwind.config.js`, we set `important: '#productbay-root'`.
-   **The Result**: All generated Tailwind utilities are automatically prefixed with an ID selector (e.g., `#productbay-root .text-center`).
-   **Benefit**: This ensures our styles **strictly** apply only to elements inside our React application wrapper (`<div id="productbay-root">`). We can use standard Tailwind classes like `p-4` or `flex` without fear of affecting the global WordPress admin interface.

### 2. Disabling Preflight

Standard Tailwind includes a "Preflight" (reset) set of styles that normalizes HTML elements globally (e.g., removing margins from headers, making images block-level).

-   **The Problem**: If included, this global reset would "leak" out of our plugin and break the layout of the WordPress Admin bar, menu, and other pages.
-   **The Solution**: We have disabled the default preflight in our configuration.
-   **Scoped Reset**: To ensure our app still looks correct, we have manually added a *scoped* reset in `src/styles/main.css` that only targets `#productbay-root`.

```css
/* src/styles/main.css */
@config "../../tailwind.config.js";
@import "tailwindcss/theme";
@import "tailwindcss/utilities";

/* Essential Scoped Preflight */
#productbay-root,
#productbay-root *,
#productbay-root ::before,
#productbay-root ::after {
  box-sizing: border-box;
  border-width: 0;
  border-style: solid;
}
```

### 3. Compliance with WordPress.org Guidelines

This approach is fully compliant with the WordPress Plugin Review Team's guidelines (2024-2025 standards).

-   **Guideline**: "Plugins must prefix all functions, classes, and global variables to avoid conflicts."
-   **CSS Interpretation**: CSS selectors must be unique enough to avoid collisions.
-   **Our Implementation**: By namespacing all our CSS under the unique ID `#productbay-root`, we satisfy the requirement for uniqueness and conflict prevention essentially "prefixing" every rule at the selector level.

This strategy offers the best of both worlds: a modern, utility-first developer experience and a polite, isolated footprint within the WordPress ecosystem.
